siApp.run(['$rootScope','$masterDataService','$masterEventService',function($rootScope, $masterDataService,$masterEventService)
{
    
    $rootScope.$editFormInit = function (startKey,initFunc)
    {
        var startObj = $masterDataService.GetData(startKey);
        initFunc(startObj);
        $masterEventService.Subscribe("OnSideListLoad", function (initParams)
        {
            initFunc(initParams);
        });
    }

    $rootScope.$safeApply = function(func)
    {
        if (typeof func == 'function')
        {
            if (!this.$$phase)
            {
                this.$apply(func());
            }
            else
            {
                func();
            }
        }
    }
}]);